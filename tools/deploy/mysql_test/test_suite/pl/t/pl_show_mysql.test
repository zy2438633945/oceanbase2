--disable_query_log
set @@session.explicit_defaults_for_timestamp=off;
--enable_query_log
#owner: linlin.xll
#owner group: sql1
#tags: pl
#description:

--result_format 4

--disable_query_log
--disable_result_log
--source mysql_test/include/index_quick_major.inc
--enable_query_log
--enable_result_log

--disable_warnings
drop table if exists a,b,t,t1;
drop procedure if exists p;
drop procedure if exists f;
drop procedure if exists pp;
--enable_warnings

connect (obsys,$OBMYSQL_MS0,admin,$OBMYSQL_PWD,oceanbase,$OBMYSQL_PORT);
connection default;

#case 1 
###test show procedure###
#procedure with one int param
delimiter //;
create procedure f(x int)
begin
end//
delimiter ;//
--source mysql_test/include/show_create_table_old_version_replica2.inc
show create procedure f;
drop procedure f;

#case 2
#procedure with one inout param
delimiter //;
create procedure f(inout x int)
begin
end//
delimiter ;//
--source mysql_test/include/show_create_table_old_version_replica2.inc
show create procedure f;
drop procedure f;

#case 3
#procedure with one out param
delimiter //;
create procedure f(out x int)
begin
end//
delimiter ;//
--source mysql_test/include/show_create_table_old_version_replica2.inc
show create procedure f;
drop procedure f;

#case 4
#procedure with one varchar param
delimiter //;
create procedure f(x varchar(10))
begin
end//
delimiter ;//
--source mysql_test/include/show_create_table_old_version_replica2.inc
show create procedure f;
drop procedure f;

#case 5
#procedure with one decimal param
delimiter //;
create procedure f(x decimal(6,2))
begin
end//
delimiter ;//
--source mysql_test/include/show_create_table_old_version_replica2.inc
show create procedure f;
drop procedure f;

#case 6
#procedure with two params
delimiter //;
create procedure f(x int, y varchar(10))
begin
end//
delimiter ;//
--source mysql_test/include/show_create_table_old_version_replica2.inc
show create procedure f;
drop procedure f;

#case 7
###test mysql.proc###
delimiter //;
create procedure f(x int)
begin
end//
create procedure p(x int)
begin
end//
delimiter ;//
select
  db,
  name,
  type,
  specific_name,
  language,
  sql_data_access,
  is_deterministic,
  security_type,
  param_list,
  returns,
  body
from mysql.proc
  where db = database() and (name = 'f' or name = 'p');
drop procedure f;
drop procedure p;

--echo ## 测试dbms_metadata.get_ddl返回值不会出现超长,pl具体内容没有意义
drop procedure if exists CASE29;
delimiter //;
--disable_warnings
CREATE PROCEDURE CASE29 (
ID1 int,
STR1 varchar(100),
ID2 int,
STR2 varchar(100),
ID3 int,
STR3 varchar(100)
)
begin
declare a31 int;
declare a32 char(255);
declare a33 varchar(4000);
declare a34 varchar(10000);
declare a35 varchar(10000);
declare a36 date;
declare a37 timestamp;
declare a38 int;
declare a39 integer;
declare a40 varchar(10000);
declare a41 int;
declare a42 char(255);
declare a43 varchar(4000);
declare a44 varchar(10000);
declare a45 varchar(10000);
declare a46 date;
declare a47 timestamp;
declare a48 int;
declare a49 integer;
declare a51 int;
declare a52 char(255);
declare a53 varchar(4000);
declare a54 varchar(10000);
declare a55 varchar(10000);
declare a56 date;
declare a57 timestamp;
declare a58 int;
declare a59 integer;

set a31=ID1;
set a32='dsfsafsadfasdfsadfasdfsdfasfew';
set a33=STR1;
set a34='aefwfsdafdsfasdfffsdcv4ffwesdfaf2343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aaeafwaefasfawefawfwaeff3wef2343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aaeawecwefaewwacfsfweafasdfwefawefwfasdcafwvfawevfawefaweffas';
set a35='2343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345fff2343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aaef43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae';
set a36='2018-05-30 01:01:59';
set a37='3029-09-09 11:34:23.231231';
set a38=3432123;
set a39=123123;


set a40='ffsdcv4ffffsdcv4ffwesdfaf2343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aaeafwaefasfawefawfwaeff3wesdfaf2343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aaeafwaefasfawefawfwaeff3';


set a51=ID3;
set a52='dfgdsfgdsafa';
set a53=STR3;
set a54='asfw3dfsf2343255ffffsdcv4ffwesdfaf2343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aaeafwaefasfawefawfwaeff3f2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aaewfaf';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a55='14545752154fff3562ade24524534563654765865970954736212343255fffffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff2115436345235234643572562eead546546795656123452bdae44326578567722343255fff2115436345235234643572562eead546546795656123452bdaeffff23452345234563452345ffff43253245232343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae45ff32322342135432311aabc668fff546263245345123453461452345ffff442343255fff2115436345235234643572562eead546546795656123452bdae4432657856772345adebcffffade3467abc62aae32657856772345adebcffffade3467abc62aae345adebcffffade3467abc62aae425367899855432145678985432eeeeffffaaaabbbbbaaedbc2456454';
set a56='1000-01-01 00:12:21';
set a57='2000-01-01 23:59:59.999999';
set a58=12154;
set a59=215425415;

end
//
delimiter ;//

show create procedure CASE29;

DROP PROCEDURE CASE29;
--enable_warnings
