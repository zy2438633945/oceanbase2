# ----------------------------------------------------------------------
# Test of GEOMETRY _ST_Buffer.
# ----------------------------------------------------------------------
drop table if exists buffer_transform, geom_operators_test;
SELECT 'T2.5', ST_AsText(_ST_Buffer(ST_GeomFromText('GEOMETRYCOLLECTION EMPTY', 4326), 1));
T2.5	ST_AsText(_ST_Buffer(ST_GeomFromText('GEOMETRYCOLLECTION EMPTY', 4326), 1))
T2.5	GEOMETRYCOLLECTION EMPTY
SELECT 'T2.6', ST_AsText(_ST_Buffer(ST_GeomFromText('GEOMETRYCOLLECTION EMPTY'), 1));
T2.6	ST_AsText(_ST_Buffer(ST_GeomFromText('GEOMETRYCOLLECTION EMPTY'), 1))
T2.6	GEOMETRYCOLLECTION EMPTY
SELECT '1', ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(4 0)'), 2, 1));
1	ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(4 0)'), 2, 1))
1	POLYGON((6 0,3.9999999999999996 2,2 -2.4492935982947064e-16,4 -2,6 0))
SELECT 'point quadsegs=2', ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(0 0)'), 1, 'quad_segs=2'));
point quadsegs=2	ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(0 0)'), 1, 'quad_segs=2'))
point quadsegs=2	POLYGON((1 0,0.7071067811865474 0.7071067811865477,-1.8369701987210297e-16 1,-0.7071067811865477 0.7071067811865475,-1 -1.2246467991473532e-16,-0.7071067811865475 -0.7071067811865476,6.123233995736766e-17 -1,0.7071067811865476 -0.7071067811865475,1 0))
SELECT 'point quadsegs=2', ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(0 0)'), 1, ST_Buffer_Strategy('point_circle', 8)));
point quadsegs=2	ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(0 0)'), 1, ST_Buffer_Strategy('point_circle', 8)))
point quadsegs=2	POLYGON((1 0,0.7071067811865474 0.7071067811865477,-1.8369701987210297e-16 1,-0.7071067811865477 0.7071067811865475,-1 -1.2246467991473532e-16,-0.7071067811865475 -0.7071067811865476,6.123233995736766e-17 -1,0.7071067811865476 -0.7071067811865475,1 0))
SELECT 'line quadsegs=2', ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2));
line quadsegs=2	ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2))
line quadsegs=2	POLYGON((0 2,-0.3901806440322521 1.9615705608064617,-0.7653668647301758 1.847759065022575,-1.1111404660392015 1.6629392246050925,-1.4142135623730927 1.4142135623730974,-1.662939224605089 1.1111404660392068,-1.8477590650225726 0.7653668647301818,-1.9615705608064604 0.39018064403225844,-2 0.0000000000000015314274795707798,-1.961570560806461 -0.39018064403225544,-1.8477590650225737 -0.7653668647301789,-1.6629392246050907 -1.1111404660392044,-1.414213562373095 -1.4142135623730951,-1.111140466039204 -1.662939224605091,-0.7653668647301795 -1.8477590650225735,-0.3901806440322564 -1.9615705608064609,0 -2,10 -2,10 -2,10.390180644032256 -1.9615705608064609,10.76536686473018 -1.8477590650225735,11.111140466039204 -1.6629392246050905,11.414213562373096 -1.414213562373095,11.66293922460509 -1.1111404660392044,11.847759065022574 -0.7653668647301796,11.96157056080646 -0.3901806440322565,12 0,11.96157056080646 0.3901806440322565,11.847759065022574 0.7653668647301796,11.66293922460509 1.1111404660392044,11.414213562373096 1.414213562373095,11.111140466039204 1.6629392246050905,10.76536686473018 1.8477590650225735,10.390180644032256 1.9615705608064609,10 2,0 2))
# Test for distance = 0
SELECT ST_ASTEXT(_ST_BUFFER(ST_GEOMFROMTEXT('POLYGON((0 0,10 0,10 10,0 10,0 0))'), 0));
ST_ASTEXT(_ST_BUFFER(ST_GEOMFROMTEXT('POLYGON((0 0,10 0,10 10,0 10,0 0))'), 0))
POLYGON((0 0,10 0,10 10,0 10,0 0))
SELECT ST_ASTEXT(_ST_BUFFER(ST_GEOMFROMTEXT('POLYGON((0 0,0 10,10 10,10 0,0 0))'), 0));
ST_ASTEXT(_ST_BUFFER(ST_GEOMFROMTEXT('POLYGON((0 0,0 10,10 10,10 0,0 0))'), 0))
POLYGON((0 0,10 0,10 10,0 10,0 0))
SELECT 'line quadsegs=2 endcap=flat', ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2, 'quad_segs=2 endcap=flat'));
line quadsegs=2 endcap=flat	ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2, 'quad_segs=2 endcap=flat'))
line quadsegs=2 endcap=flat	POLYGON((0 2,0 -2,10 -2,10 -2,10 2,0 2))
SELECT 'line quadsegs=2 endcap=butt', ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2, 'quad_segs=2 endcap=butt'));
line quadsegs=2 endcap=butt	ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2, 'quad_segs=2 endcap=butt'))
line quadsegs=2 endcap=butt	POLYGON((0 2,0 -2,10 -2,10 -2,10 2,0 2))
SELECT 'line quadsegs=2 endcap=flat', ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2, ST_Buffer_Strategy('end_flat')));
line quadsegs=2 endcap=flat	ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(0 0, 10 0)'), 2, ST_Buffer_Strategy('end_flat')))
line quadsegs=2 endcap=flat	POLYGON((0 2,0 -2,10 -2,10 -2,10 2,0 2))
SELECT 'line join=mitre mitre_limit=1.0 side=both', ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'),10,'join=mitre mitre_limit=1.0'));
line join=mitre mitre_limit=1.0 side=both	ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'),10,'join=mitre mitre_limit=1.0'))
line join=mitre mitre_limit=1.0 side=both	POLYGON((140 125.85787143148572,140 50,140.1921471959677 48.04909677983872,140.76120467488713 46.17316567634911,141.68530387697456 44.44429766980398,142.92893218813452 42.928932188134524,144.44429766980397 41.685303876974544,146.1731656763491 40.76120467488713,148.04909677983872 40.19214719596769,150 40,151.95090322016128 40.19214719596769,153.8268343236509 40.76120467488713,155.55570233019603 41.685303876974544,157.07106781186548 42.928932188134524,158.31469612302544 44.44429766980398,159.23879532511287 46.1731656763491,159.8078528040323 48.04909677983872,160 50,160 150,153.8268343236509 159.23879532511287,142.92893218813452 157.07106781186548,42.928932188134524 57.071067811865476,41.68530387697456 55.555702330196034,40.76120467488714 53.82683432365091,40.1921471959677 51.950903220161294,40 50.00000000000001,40.19214719596769 48.04909677983872,40.76120467488713 46.17316567634911,41.685303876974544 44.44429766980398,42.928932188134524 42.928932188134524,44.44429766980398 41.685303876974544,46.1731656763491 40.76120467488713,48.04909677983872 40.19214719596769,50 40,51.95090322016128 40.19214719596769,53.8268343236509 40.76120467488713,55.55570233019602 41.685303876974544,57.071067811865476 42.928932188134524,140 125.85787143148572))
SELECT 'line join=mitre mitre_limit=1.0 side=both', ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'),10, ST_Buffer_Strategy('join_miter', 1.0)));
line join=mitre mitre_limit=1.0 side=both	ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'),10, ST_Buffer_Strategy('join_miter', 1.0)))
line join=mitre mitre_limit=1.0 side=both	POLYGON((140 125.85787143148572,140 50,140.1921471959677 48.04909677983872,140.76120467488713 46.17316567634911,141.68530387697456 44.44429766980398,142.92893218813452 42.928932188134524,144.44429766980397 41.685303876974544,146.1731656763491 40.76120467488713,148.04909677983872 40.19214719596769,150 40,151.95090322016128 40.19214719596769,153.8268343236509 40.76120467488713,155.55570233019603 41.685303876974544,157.07106781186548 42.928932188134524,158.31469612302544 44.44429766980398,159.23879532511287 46.1731656763491,159.8078528040323 48.04909677983872,160 50,160 150,153.8268343236509 159.23879532511287,142.92893218813452 157.07106781186548,42.928932188134524 57.071067811865476,41.68530387697456 55.555702330196034,40.76120467488714 53.82683432365091,40.1921471959677 51.950903220161294,40 50.00000000000001,40.19214719596769 48.04909677983872,40.76120467488713 46.17316567634911,41.685303876974544 44.44429766980398,42.928932188134524 42.928932188134524,44.44429766980398 41.685303876974544,46.1731656763491 40.76120467488713,48.04909677983872 40.19214719596769,50 40,51.95090322016128 40.19214719596769,53.8268343236509 40.76120467488713,55.55570233019602 41.685303876974544,57.071067811865476 42.928932188134524,140 125.85787143148572))
SELECT 'poly quadsegs=2 join=round', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=round'));
poly quadsegs=2 join=round	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=round'))
poly quadsegs=2 join=round	POLYGON((-2 0,-1.414213562373095 -1.4142135623730951,0 -2,10 -2,11.414213562373096 -1.414213562373095,12 0,12 10,11.414213562373096 11.414213562373096,10 12,0 12,-1.414213562373095 11.414213562373096,-2 10,-2 0))
SELECT 'poly quadsegs=2 join=round', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_round', 8)));
poly quadsegs=2 join=round	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_round', 8)))
poly quadsegs=2 join=round	POLYGON((-2 0,-1.414213562373095 -1.4142135623730951,0 -2,10 -2,11.414213562373096 -1.414213562373095,12 0,12 10,11.414213562373096 11.414213562373096,10 12,0 12,-1.414213562373095 11.414213562373096,-2 10,-2 0))
SELECT 'poly quadsegs=2 join=mitre', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=mitre'));
poly quadsegs=2 join=mitre	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=mitre'))
poly quadsegs=2 join=mitre	POLYGON((-2 0,-2 -2,0 -2,10 -2,12 -2,12 0,12 10,12 12,10 12,0 12,-2 12,-2 10,-2 0))
SELECT 'poly quadsegs=2 join=mitre', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_miter', 5.0)));
poly quadsegs=2 join=mitre	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_miter', 5.0)))
poly quadsegs=2 join=mitre	POLYGON((-2 0,-2 -2,0 -2,10 -2,12 -2,12 0,12 10,12 12,10 12,0 12,-2 12,-2 10,-2 0))
SELECT 'poly quadsegs=2 join=mitre mitre_limit=1', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=mitre mitre_limit=1'));
poly quadsegs=2 join=mitre mitre_limit=1	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=mitre mitre_limit=1'))
poly quadsegs=2 join=mitre mitre_limit=1	POLYGON((-2 0,-1.414213562373095 -1.414213562373095,0 -2,10 -2,11.414213562373096 -1.414213562373095,12 0,12 10,11.414213562373096 11.414213562373096,10 12,0 12,-1.414213562373095 11.414213562373096,-2 10,-2 0))
SELECT 'poly quadsegs=2 join=mitre mitre_limit=1', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_miter', 1.0)));
poly quadsegs=2 join=mitre mitre_limit=1	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_miter', 1.0)))
poly quadsegs=2 join=mitre mitre_limit=1	POLYGON((-2 0,-1.414213562373095 -1.414213562373095,0 -2,10 -2,11.414213562373096 -1.414213562373095,12 0,12 10,11.414213562373096 11.414213562373096,10 12,0 12,-1.414213562373095 11.414213562373096,-2 10,-2 0))
SELECT 'poly quadsegs=2 join=miter miter_limit=1', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=miter miter_limit=1'));
poly quadsegs=2 join=miter miter_limit=1	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, 'quad_segs=2 join=miter miter_limit=1'))
poly quadsegs=2 join=miter miter_limit=1	POLYGON((-2 0,-1.414213562373095 -1.414213562373095,0 -2,10 -2,11.414213562373096 -1.414213562373095,12 0,12 10,11.414213562373096 11.414213562373096,10 12,0 12,-1.414213562373095 11.414213562373096,-2 10,-2 0))
SELECT 'poly quadsegs=2 join=miter miter_limit=1', ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_miter', 1.0)));
poly quadsegs=2 join=miter miter_limit=1	ST_AsText(_ST_Buffer(ST_GeomFromText('POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'), 2, ST_Buffer_Strategy('join_miter', 1.0)))
poly quadsegs=2 join=miter miter_limit=1	POLYGON((-2 0,-1.414213562373095 -1.414213562373095,0 -2,10 -2,11.414213562373096 -1.414213562373095,12 0,12 10,11.414213562373096 11.414213562373096,10 12,0 12,-1.414213562373095 11.414213562373096,-2 10,-2 0))
SELECT '#145a', ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(-116.93414544665981 34.16033385105459,-116.87777514700957 34.10831080544884,-116.86972224705954 34.086748622072776,-116.9327074288116 34.08458099517253,-117.00216369088065 34.130329331330216,-117.00216369088065 34.130329331330216)', 4326, 'axis-order=long-lat'), 0));
#145a	ST_AsText(_ST_Buffer(ST_GeomFromText('LINESTRING(-116.93414544665981 34.16033385105459,-116.87777514700957 34.10831080544884,-116.86972224705954 34.086748622072776,-116.9327074288116 34.08458099517253,-117.00216369088065 34.130329331330216,-117.0021636908
#145a	LINESTRING(34.16033385105459 -116.93414544665981,34.10831080544884 -116.87777514700957,34.086748622072776 -116.86972224705954,34.08458099517253 -116.9327074288116,34.130329331330216 -117.00216369088065,34.130329331330216 -117.00216369088065)
SELECT '#145b', ST_Area(_ST_Buffer(ST_GeomFromText('LINESTRING(-116.93414544665981 34.16033385105459,-116.87777514700957 34.10831080544884,-116.86972224705954 34.086748622072776,-116.9327074288116 34.08458099517253,-117.00216369088065 34.130329331330216,-117.00216369088065 34.130329331330216)', 4326, 'axis-order=long-lat'), 0.1));
#145b	ST_Area(_ST_Buffer(ST_GeomFromText('LINESTRING(-116.93414544665981 34.16033385105459,-116.87777514700957 34.10831080544884,-116.86972224705954 34.086748622072776,-116.9327074288116 34.08458099517253,-117.00216369088065 34.130329331330216,-117.002163690880
#145b	5976.177649226362
SELECT '#145c', ST_Area(_ST_Buffer(ST_GeomFromText('LINESTRING(-116.93414544665981 34.16033385105459,-116.87777514700957 34.10831080544884,-116.86972224705954 34.086748622072776,-116.9327074288116 34.08458099517253,-117.00216369088065 34.130329331330216,-117.00216369088065 34.130329331330216)', 'axis-order=long-lat'), 0.1));
#145c	ST_Area(_ST_Buffer(ST_GeomFromText('LINESTRING(-116.93414544665981 34.16033385105459,-116.87777514700957 34.10831080544884,-116.86972224705954 34.086748622072776,-116.9327074288116 34.08458099517253,-117.00216369088065 34.130329331330216,-117.002163690880
#145c	0.06844040204139576
create table buffer_transform(the_pt geometry, utm_srid int);
insert into buffer_transform values
(ST_GeomFromText('POINT(-170 -80)', 4326, 'axis-order=long-lat'), 32702),
(ST_GeomFromText('POINT(-160 -80)', 4326, 'axis-order=long-lat'), 32704),
(ST_GeomFromText('POINT(-150 -80)', 4326, 'axis-order=long-lat'), 32706),
(ST_GeomFromText('POINT(-140 -80)', 4326, 'axis-order=long-lat'), 32707),
(ST_GeomFromText('POINT(-130 -80)', 4326, 'axis-order=long-lat'), 32709),
(ST_GeomFromText('POINT(-120 -80)', 4326, 'axis-order=long-lat'), 32711),
(ST_GeomFromText('POINT(-110 -80)', 4326, 'axis-order=long-lat'), 32712),
(ST_GeomFromText('POINT(-100 -80)', 4326, 'axis-order=long-lat'), 32714),
(ST_GeomFromText('POINT(-90 -80)', 4326, 'axis-order=long-lat'), 32716),
(ST_GeomFromText('POINT(-80 -80)', 4326, 'axis-order=long-lat'), 32717);
select st_astext(the_pt), utm_srid, st_area(_ST_Buffer(the_pt, 10)) as the_area, 
st_area(_st_transform(_ST_Buffer(_st_transform(the_pt, utm_srid), 10), 4326)) as utm_area 
from buffer_transform;
st_astext(the_pt)	utm_srid	the_area	utm_area
POINT(-80 -170)	32702	3858.8656304584724	2191.1863998823683
POINT(-80 -160)	32704	3858.8693084350816	2191.157418960413
POINT(-80 -150)	32706	3858.864925427529	12274.807470264064
POINT(-80 -140)	32707	3858.875287256144	2191.1733906029717
POINT(-80 -130)	32709	3858.8145325860187	2191.1650214056344
POINT(-80 -120)	32711	3858.8533964753988	12274.797528114472
POINT(-80 -110)	32712	3858.831707920471	2191.1682183199237
POINT(-80 -100)	32714	3858.8685214839284	2191.193872283011
POINT(-80 -90)	32716	3858.8621217931404	12274.817163450669
POINT(-80 -80)	32717	3858.859502998974	2191.1675683808953
select st_asText(_ST_Buffer(ST_GeomFromText('point(-10 40)', 4326, 'axis-order=long-lat'), 40), 'axis-order=long-lat');
st_asText(_ST_Buffer(ST_GeomFromText('point(-10 40)', 4326, 'axis-order=long-lat'), 40), 'axis-order=long-lat')
POLYGON((-9.999999531579846 40.00036024826207,-10.000090924779336 40.00035339643826,-10.000178823737203 40.00033296371987,-10.00025985050028 40.00029973533636,-10.00033089122505 40.00025498825309,-10.000389215845544 40.000200442095746,-10.00043258298988 40.00013819306295,-10.000459326113273 40.00007063336738,-10.000468417537839 40.00000035930183,-10.00045950793879 39.99993007146334,-10.000432939760671 39.99986247097012,-10.000389734049207 39.99980015565971,-10.000331551206136 39.999745520257285,-10.000260627176242 39.99970066435035,-10.000179687519648 39.999667311705906,-10.00009184267169 39.99964674403009,-10.00000046841523 39.99963975171534,-9.999909076158115 39.999646603468804,-9.999821177999907 39.999667035985034,-9.999740151772027 39.99970026406551,-9.999669111236516 39.999745010791,-9.999610786430528 39.999799556590254,-9.999567418754191 39.999861805319206,-9.999540674833275 39.999929364811415,-9.999531582467085 39.99999963880504,-9.999540491123758 40.000069926714026,-9.999567058502222 40.00013752740939,-9.999610263678486 40.000199843022834,-9.999668446332297 40.000254478783056,-9.999739370547685 40.00029933504806,-9.99982031073628 40.00033268799637,-9.99990815638176 40.00035325587558,-9.999999531579846 40.00036024826207))
CREATE TABLE geom_operators_test (
description varchar(64) PRIMARY KEY,
geom GEOMETRY
);
INSERT INTO geom_operators_test VALUES
('NULL', NULL),
('Square (left)', ST_GeomFromText('POLYGON((-1.0 0.0, 0.0 0.0, 0.0 1.0, -1.0 1.0, -1.0 0.0))')),
('Point middle of Left Square', ST_GeomFromText('POINT(-0.5 0.5)')),
('Square (right)', ST_GeomFromText('POLYGON((0.0 0.0, 1.0 0.0, 1.0 1.0, 0.0 1.0, 0.0 0.0))')),
('Point middle of Right Square', ST_GeomFromText('POINT(0.5 0.5)')),
('Square overlapping left and right square', ST_GeomFromText('POLYGON((-0.1 0.0, 1.0 0.0, 1.0 1.0, -0.1 1.0, -0.1 0.0))')),
('Line going through left and right square', ST_GeomFromText('LINESTRING(-0.5 0.5, 0.5 0.5)')),
('Faraway point', ST_GeomFromText('POINT(5.0 5.0)')),
('Empty LineString', ST_GeomFromText('GEOMETRYCOLLECTION EMPTY')),
('Empty Point', ST_GeomFromText('GEOMETRYCOLLECTION EMPTY')),
('Empty GeometryCollection', ST_GeomFromText('GEOMETRYCOLLECTION EMPTY')),
('Nested Geometry Collection', ST_GeomFromText('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(POINT(0 0)))'));
SELECT
a.description,
ST_AsText(_ST_Buffer(a.geom, 10)),
ST_AsText(_ST_Buffer(a.geom, 10, 'endcap=flat'))
FROM geom_operators_test a
ORDER BY a.description;
description	ST_AsText(_ST_Buffer(a.geom, 10))	ST_AsText(_ST_Buffer(a.geom, 10, 'endcap=flat'))
Empty GeometryCollection	GEOMETRYCOLLECTION EMPTY	GEOMETRYCOLLECTION EMPTY
Empty LineString	GEOMETRYCOLLECTION EMPTY	GEOMETRYCOLLECTION EMPTY
Empty Point	GEOMETRYCOLLECTION EMPTY	GEOMETRYCOLLECTION EMPTY
Faraway point	POLYGON((15 5,14.807852804032311 6.950903220161244,14.238795325112882 8.826834323650862,13.314696123025472 10.555702330195993,12.071067811865499 12.07106781186545,10.555702330196048 13.314696123025435,8.826834323650925 14.238795325112857,6.950903220161309 14.807852804032299,5.000000000000025 15,3.0490967798387394 14.807852804032308,1.1731656763491212 14.238795325112875,-0.5557023301960076 13.314696123025463,-2.071067811865463 12.071067811865486,-3.3146961230254455 10.555702330196034,-4.2387953251128625 8.826834323650909,-4.8078528040323025 6.950903220161292,-5 5.000000000000008,-4.807852804032306 3.049096779838723,-4.238795325112868 1.1731656763491056,-3.3146961230254526 -0.5557023301960218,-2.0710678118654746 -2.0710678118654755,-0.55570233019602 -3.3146961230254544,1.173165676349103 -4.238795325112868,3.049096779838718 -4.807852804032304,5.000000000000001 -5,6.950903220161283 -4.807852804032304,8.826834323650898 -4.238795325112868,10.555702330196024 -3.3146961230254526,12.071067811865476 -2.0710678118654746,13.314696123025453 -0.5557023301960218,14.238795325112868 1.173165676349102,14.807852804032304 3.0490967798387176,15 5))	POLYGON((15 5,14.807852804032311 6.950903220161244,14.238795325112882 8.826834323650862,13.314696123025472 10.555702330195993,12.071067811865499 12.07106781186545,10.555702330196048 13.314696123025435,8.826834323650925 14.238795325112857,6.950903220161309 14.807852804032299,5.000000000000025 15,3.0490967798387394 14.807852804032308,1.1731656763491212 14.238795325112875,-0.5557023301960076 13.314696123025463,-2.071067811865463 12.071067811865486,-3.3146961230254455 10.555702330196034,-4.2387953251128625 8.826834323650909,-4.8078528040323025 6.950903220161292,-5 5.000000000000008,-4.807852804032306 3.049096779838723,-4.238795325112868 1.1731656763491056,-3.3146961230254526 -0.5557023301960218,-2.0710678118654746 -2.0710678118654755,-0.55570233019602 -3.3146961230254544,1.173165676349103 -4.238795325112868,3.049096779838718 -4.807852804032304,5.000000000000001 -5,6.950903220161283 -4.807852804032304,8.826834323650898 -4.238795325112868,10.555702330196024 -3.3146961230254526,12.071067811865476 -2.0710678118654746,13.314696123025453 -0.5557023301960218,14.238795325112868 1.173165676349102,14.807852804032304 3.0490967798387176,15 5))
Line going through left and right square	POLYGON((-0.5 10.5,-2.4509032201612606 10.307852804032308,-4.326834323650878 9.738795325112875,-6.055702330196008 8.814696123025463,-7.571067811865463 7.571067811865487,-8.814696123025445 6.055702330196034,-9.738795325112862 4.326834323650909,-10.307852804032303 2.450903220161292,-10.5 0.5000000000000077,-10.307852804032306 -1.4509032201612773,-9.738795325112868 -3.3268343236508944,-8.814696123025453 -5.055702330196022,-7.571067811865475 -6.5710678118654755,-6.05570233019602 -7.814696123025454,-4.326834323650897 -8.738795325112868,-2.450903220161282 -9.307852804032304,-0.5 -9.5,0.5 -9.5,0.5 -9.5,2.4509032201612833 -9.307852804032304,4.326834323650898 -8.738795325112868,6.055702330196023 -7.814696123025453,7.5710678118654755 -6.571067811865475,8.814696123025453 -5.055702330196022,9.738795325112868 -3.326834323650898,10.307852804032304 -1.4509032201612824,10.5 0.5,10.307852804032304 2.4509032201612824,9.738795325112868 4.326834323650898,8.814696123025453 6.055702330196022,7.5710678118654755 7.571067811865475,6.055702330196023 8.814696123025453,4.326834323650898 9.738795325112868,2.4509032201612833 10.307852804032304,0.5 10.5,-0.5 10.5))	POLYGON((-0.5 10.5,-0.5 -9.5,0.5 -9.5,0.5 -9.5,0.5 10.5,-0.5 10.5))
Nested Geometry Collection	POLYGON((10 0,9.807852804032311 1.9509032201612437,9.238795325112882 3.826834323650863,8.314696123025472 5.555702330195993,7.071067811865499 7.0710678118654515,5.555702330196048 8.314696123025435,3.8268343236509246 9.238795325112857,1.950903220161309 9.807852804032299,0.000000000000024808382392282727 10,-1.9509032201612606 9.807852804032308,-3.826834323650879 9.238795325112875,-5.555702330196008 8.314696123025463,-7.071067811865463 7.071067811865487,-8.314696123025445 5.555702330196034,-9.238795325112862 3.826834323650909,-9.807852804032303 1.9509032201612921,-10 0.0000000000000076571373978539,-9.807852804032306 -1.9509032201612773,-9.238795325112868 -3.8268343236508944,-8.314696123025453 -5.555702330196022,-7.071067811865475 -7.0710678118654755,-5.55570233019602 -8.314696123025454,-3.826834323650897 -9.238795325112868,-1.950903220161282 -9.807852804032304,6.123233995736766e-16 -10,1.9509032201612833 -9.807852804032304,3.8268343236508984 -9.238795325112868,5.555702330196023 -8.314696123025453,7.0710678118654755 -7.071067811865475,8.314696123025453 -5.555702330196022,9.238795325112868 -3.826834323650898,9.807852804032304 -1.9509032201612824,10 0))	POLYGON((10 0,9.807852804032311 1.9509032201612437,9.238795325112882 3.826834323650863,8.314696123025472 5.555702330195993,7.071067811865499 7.0710678118654515,5.555702330196048 8.314696123025435,3.8268343236509246 9.238795325112857,1.950903220161309 9.807852804032299,0.000000000000024808382392282727 10,-1.9509032201612606 9.807852804032308,-3.826834323650879 9.238795325112875,-5.555702330196008 8.314696123025463,-7.071067811865463 7.071067811865487,-8.314696123025445 5.555702330196034,-9.238795325112862 3.826834323650909,-9.807852804032303 1.9509032201612921,-10 0.0000000000000076571373978539,-9.807852804032306 -1.9509032201612773,-9.238795325112868 -3.8268343236508944,-8.314696123025453 -5.555702330196022,-7.071067811865475 -7.0710678118654755,-5.55570233019602 -8.314696123025454,-3.826834323650897 -9.238795325112868,-1.950903220161282 -9.807852804032304,6.123233995736766e-16 -10,1.9509032201612833 -9.807852804032304,3.8268343236508984 -9.238795325112868,5.555702330196023 -8.314696123025453,7.0710678118654755 -7.071067811865475,8.314696123025453 -5.555702330196022,9.238795325112868 -3.826834323650898,9.807852804032304 -1.9509032201612824,10 0))
NULL	NULL	NULL
Point middle of Left Square	POLYGON((9.5 0.5,9.307852804032311 2.4509032201612437,8.738795325112882 4.326834323650862,7.814696123025472 6.055702330195993,6.571067811865499 7.5710678118654515,5.055702330196048 8.814696123025435,3.3268343236509246 9.738795325112857,1.450903220161309 10.307852804032299,-0.4999999999999752 10.5,-2.4509032201612606 10.307852804032308,-4.326834323650878 9.738795325112875,-6.055702330196008 8.814696123025463,-7.571067811865463 7.571067811865487,-8.814696123025445 6.055702330196034,-9.738795325112862 4.326834323650909,-10.307852804032303 2.450903220161292,-10.5 0.5000000000000077,-10.307852804032306 -1.4509032201612773,-9.738795325112868 -3.3268343236508944,-8.814696123025453 -5.055702330196022,-7.571067811865475 -6.5710678118654755,-6.05570233019602 -7.814696123025454,-4.326834323650897 -8.738795325112868,-2.450903220161282 -9.307852804032304,-0.4999999999999994 -9.5,1.4509032201612833 -9.307852804032304,3.3268343236508984 -8.738795325112868,5.055702330196023 -7.814696123025453,6.5710678118654755 -6.571067811865475,7.814696123025453 -5.055702330196022,8.738795325112868 -3.326834323650898,9.307852804032304 -1.4509032201612824,9.5 0.5))	POLYGON((9.5 0.5,9.307852804032311 2.4509032201612437,8.738795325112882 4.326834323650862,7.814696123025472 6.055702330195993,6.571067811865499 7.5710678118654515,5.055702330196048 8.814696123025435,3.3268343236509246 9.738795325112857,1.450903220161309 10.307852804032299,-0.4999999999999752 10.5,-2.4509032201612606 10.307852804032308,-4.326834323650878 9.738795325112875,-6.055702330196008 8.814696123025463,-7.571067811865463 7.571067811865487,-8.814696123025445 6.055702330196034,-9.738795325112862 4.326834323650909,-10.307852804032303 2.450903220161292,-10.5 0.5000000000000077,-10.307852804032306 -1.4509032201612773,-9.738795325112868 -3.3268343236508944,-8.814696123025453 -5.055702330196022,-7.571067811865475 -6.5710678118654755,-6.05570233019602 -7.814696123025454,-4.326834323650897 -8.738795325112868,-2.450903220161282 -9.307852804032304,-0.4999999999999994 -9.5,1.4509032201612833 -9.307852804032304,3.3268343236508984 -8.738795325112868,5.055702330196023 -7.814696123025453,6.5710678118654755 -6.571067811865475,7.814696123025453 -5.055702330196022,8.738795325112868 -3.326834323650898,9.307852804032304 -1.4509032201612824,9.5 0.5))
Point middle of Right Square	POLYGON((10.5 0.5,10.307852804032311 2.4509032201612437,9.738795325112882 4.326834323650862,8.814696123025472 6.055702330195993,7.571067811865499 7.5710678118654515,6.055702330196048 8.814696123025435,4.326834323650925 9.738795325112857,2.450903220161309 10.307852804032299,0.5000000000000248 10.5,-1.4509032201612606 10.307852804032308,-3.326834323650879 9.738795325112875,-5.055702330196008 8.814696123025463,-6.571067811865463 7.571067811865487,-7.8146961230254455 6.055702330196034,-8.738795325112862 4.326834323650909,-9.307852804032303 2.450903220161292,-9.5 0.5000000000000077,-9.307852804032306 -1.4509032201612773,-8.738795325112868 -3.3268343236508944,-7.814696123025453 -5.055702330196022,-6.571067811865475 -6.5710678118654755,-5.05570233019602 -7.814696123025454,-3.326834323650897 -8.738795325112868,-1.450903220161282 -9.307852804032304,0.5000000000000007 -9.5,2.4509032201612833 -9.307852804032304,4.326834323650898 -8.738795325112868,6.055702330196023 -7.814696123025453,7.5710678118654755 -6.571067811865475,8.814696123025453 -5.055702330196022,9.738795325112868 -3.326834323650898,10.307852804032304 -1.4509032201612824,10.5 0.5))	POLYGON((10.5 0.5,10.307852804032311 2.4509032201612437,9.738795325112882 4.326834323650862,8.814696123025472 6.055702330195993,7.571067811865499 7.5710678118654515,6.055702330196048 8.814696123025435,4.326834323650925 9.738795325112857,2.450903220161309 10.307852804032299,0.5000000000000248 10.5,-1.4509032201612606 10.307852804032308,-3.326834323650879 9.738795325112875,-5.055702330196008 8.814696123025463,-6.571067811865463 7.571067811865487,-7.8146961230254455 6.055702330196034,-8.738795325112862 4.326834323650909,-9.307852804032303 2.450903220161292,-9.5 0.5000000000000077,-9.307852804032306 -1.4509032201612773,-8.738795325112868 -3.3268343236508944,-7.814696123025453 -5.055702330196022,-6.571067811865475 -6.5710678118654755,-5.05570233019602 -7.814696123025454,-3.326834323650897 -8.738795325112868,-1.450903220161282 -9.307852804032304,0.5000000000000007 -9.5,2.4509032201612833 -9.307852804032304,4.326834323650898 -8.738795325112868,6.055702330196023 -7.814696123025453,7.5710678118654755 -6.571067811865475,8.814696123025453 -5.055702330196022,9.738795325112868 -3.326834323650898,10.307852804032304 -1.4509032201612824,10.5 0.5))
Square (left)	POLYGON((-11 0,-10.807852804032306 -1.9509032201612773,-10.238795325112868 -3.8268343236508944,-9.314696123025453 -5.555702330196022,-8.071067811865476 -7.0710678118654755,-6.55570233019602 -8.314696123025454,-4.826834323650897 -9.238795325112868,-2.950903220161282 -9.807852804032304,-1 -10,0 -10,1.9509032201612833 -9.807852804032304,3.8268343236508984 -9.238795325112868,5.555702330196023 -8.314696123025453,7.0710678118654755 -7.071067811865475,8.314696123025453 -5.555702330196022,9.238795325112868 -3.826834323650898,9.807852804032304 -1.9509032201612824,10 0,10 1,9.807852804032304 2.9509032201612824,9.238795325112868 4.826834323650898,8.314696123025453 6.555702330196022,7.0710678118654755 8.071067811865476,5.555702330196023 9.314696123025453,3.8268343236508984 10.238795325112868,1.9509032201612833 10.807852804032304,0 11,-1 11,-2.950903220161271 10.807852804032306,-4.826834323650887 10.238795325112871,-6.555702330196012 9.31469612302546,-8.071067811865468 8.071067811865483,-9.314696123025447 6.555702330196029,-10.238795325112864 4.826834323650903,-10.807852804032304 2.950903220161286,-11 1,-11 0))	POLYGON((-11 0,-10.807852804032306 -1.9509032201612773,-10.238795325112868 -3.8268343236508944,-9.314696123025453 -5.555702330196022,-8.071067811865476 -7.0710678118654755,-6.55570233019602 -8.314696123025454,-4.826834323650897 -9.238795325112868,-2.950903220161282 -9.807852804032304,-1 -10,0 -10,1.9509032201612833 -9.807852804032304,3.8268343236508984 -9.238795325112868,5.555702330196023 -8.314696123025453,7.0710678118654755 -7.071067811865475,8.314696123025453 -5.555702330196022,9.238795325112868 -3.826834323650898,9.807852804032304 -1.9509032201612824,10 0,10 1,9.807852804032304 2.9509032201612824,9.238795325112868 4.826834323650898,8.314696123025453 6.555702330196022,7.0710678118654755 8.071067811865476,5.555702330196023 9.314696123025453,3.8268343236508984 10.238795325112868,1.9509032201612833 10.807852804032304,0 11,-1 11,-2.950903220161271 10.807852804032306,-4.826834323650887 10.238795325112871,-6.555702330196012 9.31469612302546,-8.071067811865468 8.071067811865483,-9.314696123025447 6.555702330196029,-10.238795325112864 4.826834323650903,-10.807852804032304 2.950903220161286,-11 1,-11 0))
Square (right)	POLYGON((-10 0,-9.807852804032306 -1.9509032201612773,-9.238795325112868 -3.8268343236508944,-8.314696123025453 -5.555702330196022,-7.071067811865475 -7.0710678118654755,-5.55570233019602 -8.314696123025454,-3.826834323650897 -9.238795325112868,-1.950903220161282 -9.807852804032304,0 -10,1 -10,2.9509032201612833 -9.807852804032304,4.826834323650898 -9.238795325112868,6.555702330196023 -8.314696123025453,8.071067811865476 -7.071067811865475,9.314696123025453 -5.555702330196022,10.238795325112868 -3.826834323650898,10.807852804032304 -1.9509032201612824,11 0,11 1,10.807852804032304 2.9509032201612824,10.238795325112868 4.826834323650898,9.314696123025453 6.555702330196022,8.071067811865476 8.071067811865476,6.555702330196023 9.314696123025453,4.826834323650898 10.238795325112868,2.9509032201612833 10.807852804032304,1 11,0 11,-1.950903220161271 10.807852804032306,-3.826834323650887 10.238795325112871,-5.555702330196012 9.31469612302546,-7.071067811865468 8.071067811865483,-8.314696123025447 6.555702330196029,-9.238795325112864 4.826834323650903,-9.807852804032304 2.950903220161286,-10 1,-10 0))	POLYGON((-10 0,-9.807852804032306 -1.9509032201612773,-9.238795325112868 -3.8268343236508944,-8.314696123025453 -5.555702330196022,-7.071067811865475 -7.0710678118654755,-5.55570233019602 -8.314696123025454,-3.826834323650897 -9.238795325112868,-1.950903220161282 -9.807852804032304,0 -10,1 -10,2.9509032201612833 -9.807852804032304,4.826834323650898 -9.238795325112868,6.555702330196023 -8.314696123025453,8.071067811865476 -7.071067811865475,9.314696123025453 -5.555702330196022,10.238795325112868 -3.826834323650898,10.807852804032304 -1.9509032201612824,11 0,11 1,10.807852804032304 2.9509032201612824,10.238795325112868 4.826834323650898,9.314696123025453 6.555702330196022,8.071067811865476 8.071067811865476,6.555702330196023 9.314696123025453,4.826834323650898 10.238795325112868,2.9509032201612833 10.807852804032304,1 11,0 11,-1.950903220161271 10.807852804032306,-3.826834323650887 10.238795325112871,-5.555702330196012 9.31469612302546,-7.071067811865468 8.071067811865483,-8.314696123025447 6.555702330196029,-9.238795325112864 4.826834323650903,-9.807852804032304 2.950903220161286,-10 1,-10 0))
Square overlapping left and right square	POLYGON((-10.1 0,-9.907852804032306 -1.9509032201612773,-9.338795325112867 -3.8268343236508944,-8.414696123025452 -5.555702330196022,-7.171067811865474 -7.0710678118654755,-5.65570233019602 -8.314696123025454,-3.926834323650897 -9.238795325112868,-2.050903220161282 -9.807852804032304,-0.1 -10,1 -10,2.9509032201612833 -9.807852804032304,4.826834323650898 -9.238795325112868,6.555702330196023 -8.314696123025453,8.071067811865476 -7.071067811865475,9.314696123025453 -5.555702330196022,10.238795325112868 -3.826834323650898,10.807852804032304 -1.9509032201612824,11 0,11 1,10.807852804032304 2.9509032201612824,10.238795325112868 4.826834323650898,9.314696123025453 6.555702330196022,8.071067811865476 8.071067811865476,6.555702330196023 9.314696123025453,4.826834323650898 10.238795325112868,2.9509032201612833 10.807852804032304,1 11,-0.1 11,-2.050903220161271 10.807852804032306,-3.926834323650887 10.238795325112871,-5.655702330196012 9.31469612302546,-7.171067811865468 8.071067811865483,-8.414696123025447 6.555702330196029,-9.338795325112864 4.826834323650903,-9.907852804032304 2.950903220161286,-10.1 1,-10.1 0))	POLYGON((-10.1 0,-9.907852804032306 -1.9509032201612773,-9.338795325112867 -3.8268343236508944,-8.414696123025452 -5.555702330196022,-7.171067811865474 -7.0710678118654755,-5.65570233019602 -8.314696123025454,-3.926834323650897 -9.238795325112868,-2.050903220161282 -9.807852804032304,-0.1 -10,1 -10,2.9509032201612833 -9.807852804032304,4.826834323650898 -9.238795325112868,6.555702330196023 -8.314696123025453,8.071067811865476 -7.071067811865475,9.314696123025453 -5.555702330196022,10.238795325112868 -3.826834323650898,10.807852804032304 -1.9509032201612824,11 0,11 1,10.807852804032304 2.9509032201612824,10.238795325112868 4.826834323650898,9.314696123025453 6.555702330196022,8.071067811865476 8.071067811865476,6.555702330196023 9.314696123025453,4.826834323650898 10.238795325112868,2.9509032201612833 10.807852804032304,1 11,-0.1 11,-2.050903220161271 10.807852804032306,-3.926834323650887 10.238795325112871,-5.655702330196012 9.31469612302546,-7.171067811865468 8.071067811865483,-8.414696123025447 6.555702330196029,-9.338795325112864 4.826834323650903,-9.907852804032304 2.950903220161286,-10.1 1,-10.1 0))
SELECT ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(0 0)', 4326, 'axis-order=long-lat'), 10.0));
ST_AsText(_ST_Buffer(ST_GeomFromText('POINT(0 0)', 4326, 'axis-order=long-lat'), 10.0))
POLYGON((0.00009043690205834696 0.00000008983151301475171,0.00008871682575996444 -0.000017437147542780015,0.00008358741165992818 -0.00003429402684084791,0.00007524578019769127 -0.000049833005966448834,0.00006401249554786816 -0.00006345693063403321,0.000050319246542238885 -0.0000746422410297824,0.000034692257086531106 -0.00008295909194411213,0.00001773206364056466 -0.00008808787147094533,0.0000000904369326323936 -0.00008983148349619179,-0.000017554665215903647 -0.00008812292198871517,-0.0000345251514244642 -0.00008302784600794263,-0.00005016885541975851 -0.00007474205645966471,-0.00006388459841173081 -0.00006358397157904537,-0.0000751452920633201 -0.00004998239031414649,-0.00008351819422976948 -0.000034460013834145505,-0.00008868153902038555 -0.00001761335839441037,-0.00009043690205836663 -0.00000008983151301486148,-0.00008871682575996458 0.00001743714754278013,-0.00008358741165992815 0.00003429402684084804,-0.00007524578019769122 0.00004983300596644897,-0.00006401249554786805 0.00006345693063403335,-0.00005031924654223872 0.00007464224102978251,-0.0000346922570865309 0.0000829590919441122,-0.00001773206364056444 0.0000880878714709454,-0.00000009043693263217271 0.00008983148349619179,0.000017554665215903864 0.00008812292198871513,0.00003452515142446441 0.00008302784600794254,0.000050168855419758694 0.0000747420564596646,0.00006388459841173093 0.00006358397157904524,0.0000751452920633202 0.00004998239031414635,0.00008351819422976952 0.000034460013834145376,0.00008868153902038546 0.00001761335839441024,0.00009043690205834696 0.00000008983151301475171))
drop table buffer_transform, geom_operators_test;
select st_astext(_st_buffer(ST_GeomFromText('POINT(15 20)'),1,-1));
st_astext(_st_buffer(ST_GeomFromText('POINT(15 20)'),1,-1))
POLYGON((16 20,15.98078528040323 20.195090322016124,15.923879532511288 20.382683432365088,15.831469612302547 20.555570233019598,15.70710678118655 20.707106781186546,15.555570233019605 20.831469612302545,15.382683432365093 20.923879532511286,15.195090322016132 20.98078528040323,15.000000000000002 21,14.804909677983874 20.980785280403232,14.617316567634912 20.923879532511286,14.444429766980399 20.831469612302545,14.292893218813454 20.70710678118655,14.168530387697455 20.555570233019605,14.076120467488714 20.38268343236509,14.01921471959677 20.195090322016128,14 20,14.01921471959677 19.804909677983872,14.076120467488714 19.617316567634912,14.168530387697455 19.4444297669804,14.292893218813452 19.292893218813454,14.444429766980399 19.168530387697455,14.61731656763491 19.076120467488714,14.804909677983872 19.019214719596768,15 19,15.195090322016128 19.019214719596768,15.38268343236509 19.076120467488714,15.555570233019603 19.168530387697455,15.707106781186548 19.292893218813454,15.831469612302545 19.4444297669804,15.923879532511286 19.61731656763491,15.98078528040323 19.804909677983872,16 20))
select st_astext(_st_buffer(ST_GeomFromText('POINT(15 20)'),1,0));
st_astext(_st_buffer(ST_GeomFromText('POINT(15 20)'),1,0))
POLYGON((16 20,15.98078528040323 20.195090322016124,15.923879532511288 20.382683432365088,15.831469612302547 20.555570233019598,15.70710678118655 20.707106781186546,15.555570233019605 20.831469612302545,15.382683432365093 20.923879532511286,15.195090322016132 20.98078528040323,15.000000000000002 21,14.804909677983874 20.980785280403232,14.617316567634912 20.923879532511286,14.444429766980399 20.831469612302545,14.292893218813454 20.70710678118655,14.168530387697455 20.555570233019605,14.076120467488714 20.38268343236509,14.01921471959677 20.195090322016128,14 20,14.01921471959677 19.804909677983872,14.076120467488714 19.617316567634912,14.168530387697455 19.4444297669804,14.292893218813452 19.292893218813454,14.444429766980399 19.168530387697455,14.61731656763491 19.076120467488714,14.804909677983872 19.019214719596768,15 19,15.195090322016128 19.019214719596768,15.38268343236509 19.076120467488714,15.555570233019603 19.168530387697455,15.707106781186548 19.292893218813454,15.831469612302545 19.4444297669804,15.923879532511286 19.61731656763491,15.98078528040323 19.804909677983872,16 20))
select _st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',26918),1,'quad_segs=0'));
_st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',26918),1,'quad_segs=0'))
SRID=26918;POLYGON((16 20,15.98078528040323 20.195090322016124,15.923879532511288 20.382683432365088,15.831469612302547 20.555570233019598,15.70710678118655 20.707106781186546,15.555570233019605 20.831469612302545,15.382683432365093 20.923879532511286,15.195090322016132 20.98078528040323,15.000000000000002 21,14.804909677983874 20.980785280403232,14.617316567634912 20.923879532511286,14.444429766980399 20.831469612302545,14.292893218813454 20.70710678118655,14.168530387697455 20.555570233019605,14.076120467488714 20.38268343236509,14.01921471959677 20.195090322016128,14 20,14.01921471959677 19.804909677983872,14.076120467488714 19.617316567634912,14.168530387697455 19.4444297669804,14.292893218813452 19.292893218813454,14.444429766980399 19.168530387697455,14.61731656763491 19.076120467488714,14.804909677983872 19.019214719596768,15 19,15.195090322016128 19.019214719596768,15.38268343236509 19.076120467488714,15.555570233019603 19.168530387697455,15.707106781186548 19.292893218813454,15.831469612302545 19.4444297669804,15.923879532511286 19.61731656763491,15.98078528040323 19.804909677983872,16 20))
select _st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',26918),1,'quad_segs=null'));
_st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',26918),1,'quad_segs=null'))
SRID=26918;POLYGON((16 20,15.98078528040323 20.195090322016124,15.923879532511288 20.382683432365088,15.831469612302547 20.555570233019598,15.70710678118655 20.707106781186546,15.555570233019605 20.831469612302545,15.382683432365093 20.923879532511286,15.195090322016132 20.98078528040323,15.000000000000002 21,14.804909677983874 20.980785280403232,14.617316567634912 20.923879532511286,14.444429766980399 20.831469612302545,14.292893218813454 20.70710678118655,14.168530387697455 20.555570233019605,14.076120467488714 20.38268343236509,14.01921471959677 20.195090322016128,14 20,14.01921471959677 19.804909677983872,14.076120467488714 19.617316567634912,14.168530387697455 19.4444297669804,14.292893218813452 19.292893218813454,14.444429766980399 19.168530387697455,14.61731656763491 19.076120467488714,14.804909677983872 19.019214719596768,15 19,15.195090322016128 19.019214719596768,15.38268343236509 19.076120467488714,15.555570233019603 19.168530387697455,15.707106781186548 19.292893218813454,15.831469612302545 19.4444297669804,15.923879532511286 19.61731656763491,15.98078528040323 19.804909677983872,16 20))
select _st_buffer(ST_GeomFromText('POINT(15 20)'),'');
ERROR 22023: Invalid GIS data provided to function _st_buffer.
select _st_buffer(ST_GeomFromText('POINT(15 20)'),1,'test');
ERROR HY000: Incorrect arguments to _st_buffer
select st_buffer(ST_GeomFromText('POINT'),null);
ERROR 22023: Invalid GIS data provided to function st_geomfromtext.
select _st_buffer(ST_GeomFromText('POINT'),null);
ERROR 22023: Invalid GIS data provided to function st_geomfromtext.
select _st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',26918),2,9999999));
ERROR HY000: Parameter points_per_circle exceeds the maximum number of points in a geometry (65536) in function _st_buffer.
select _st_buffer(x'0000000001060000000200000001030000000100000005000000000000000000000000000000000000000000000000002440000000000000000000000000000024400000000000002440000000000000000000000000000024400000000000000000000000000000000001030000000100000005000000000000000000144000000000000014400000000000001C4000000000000014400000000000001C400000000000001C4000000000000014400000000000001C4000000000000014400000000000001441',1);
ERROR 22023: Invalid GIS data provided to function _st_buffer.
select _st_asewkt(_st_buffer(ST_GeomFromText('MULTIPOLYGON(((0 1,10 0,10 10,0 10,0 1)))',4326),1));
_st_asewkt(_st_buffer(ST_GeomFromText('MULTIPOLYGON(((0 1,10 0,10 10,0 10,0 1)))',4326),1))
SRID=4326;POLYGON((0.999991057879892 -0.000001024681905,0.999991343409445 -0.000002655311391,0.999991921577137 -0.000004196177432,0.999992772837874 -0.000005595190674,0.999993868414576 -0.000006805057143,0.999995171271009 -0.000007784877007,0.999996637363799 -0.000008501527211,0.999998217131321 -0.000008930781227,0.999999857169148 -0.000009058128019,9.999999763841377 -0.000009111486118,10.000001335537663 -0.000008994016551,10.000002865572117 -0.000008595980388,10.000004306215603 -0.000007929794299,10.000005612527538 -0.000007016239812,10.000006743757769 -0.000005883815098,10.00000766461779 -0.000004567845919,10.000008346381552 -0.000003109383665,10.000008767781564 -0.000001553924797,10.00000891567233 0.000000050008458,10.00000912044631 10.00000006765241,10.000008942113512 10.000001796596374,10.000008433116587 10.000003458537165,10.000007612277368 10.000004992019045,10.000006509949088 10.000006340336467,10.00000516689397 10.000007453630937,10.0000036327759 10.000008290734733,10.000001964323959 10.000008820693173,10.00000022323466 10.000009023909296,-0.000000087169914 10.000008960982653,-0.000001787968286 10.000008770279965,-0.000003426809312 10.000008275133851,-0.000004946903248 10.000007492702316,-0.000006295575204 10.00000645009847,-0.000007426090516 10.000005183451016,-0.000008299274134 10.000003736652301,-0.000008884868177 10.00000215983734,-0.000009162580417 10.000000507646522,-0.00000912278749 9.999998837332182,0.999991057879892 -0.000001024681905))
select _st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',4236),1,1));
_st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',4236),1,1))
SRID=4326;POLYGON((19.99722874851131 14.999664554748017,19.997219440562965 14.999655525253292,19.997228730146585 14.999646477912428,19.99723803809493 14.999655507402725,19.99722874851131 14.999664554748017))
select _st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',4267),1,1));
_st_asewkt(_st_buffer(ST_GeomFromText('POINT(15 20)',4267),1,1))
SRID=4326;POLYGON((20.001992210504945 14.999751531481529,20.002001498815 14.999742484834657,20.00199219157466 14.999733456589583,20.001982903264594 14.999742503234902,20.001992210504945 14.999751531481529))
